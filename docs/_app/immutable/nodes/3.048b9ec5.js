import{s as Q,g as M,n as I,h as L,c as re,o as oe,i as ie,d as O,e as ce}from"../chunks/scheduler.16dc3c9f.js";import{S as W,i as X,B as ue,H as fe,C as _e,j as A,D as he,f as y,E as j,a as q,g as $,s as P,r as Y,h as C,y as R,c as x,u as ee,k,x as g,v as te,F as me,d as E,b as ae,t as T,w as se,z as de,m as B,n as N,p as le,o as D,A as z}from"../chunks/index.f062f94d.js";import{e as F}from"../chunks/each.e59479a4.js";import{g as ge,p as pe,a as ve}from"../chunks/_layout.0cdfbe74.js";import{l as be,d as G,b as U,f as V}from"../chunks/db.00e54736.js";import{g as ke}from"../chunks/navigation.16b98100.js";import{S as ye}from"../chunks/shield-warning-bold.a331ddf5.js";function we(m){let e,s,n='<g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" d="M15 12h-3m0 0H9m3 0V9m0 3v3"/></g>',o=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},m[0]],l={};for(let t=0;t<o.length;t+=1)l=M(l,o[t]);return{c(){e=ue("svg"),s=new fe(!0),this.h()},l(t){e=_e(t,"svg",{viewBox:!0,width:!0,height:!0});var _=A(e);s=he(_,!0),_.forEach(y),this.h()},h(){s.a=null,j(e,l)},m(t,_){q(t,e,_),s.m(n,e)},p(t,[_]){j(e,l=ge(o,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},_&1&&t[0]]))},i:I,o:I,d(t){t&&y(e)}}}function $e(m,e,s){return m.$$set=n=>{s(0,e=M(M({},e),L(n)))},e=L(e),[e]}class Ce extends W{constructor(e){super(),X(this,e,$e,we,Q,{})}}function Z(m,e,s){var l;const n=m.slice();n[3]=e[s],n[6]=s;const o=((l=n[3].characters)==null?void 0:l.length)??0;return n[4]=o,n}function J(m){let e,s,n,o,l=m[4]+"",t,_,b=m[4]!==1?"s":"",v,w,d;return s=new ye({}),{c(){e=$("span"),Y(s.$$.fragment),n=P(),o=$("small"),t=B(l),_=B("/24 chacacter"),v=B(b),w=B("!"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var a=A(e);ee(s.$$.fragment,a),n=x(a),o=C(a,"SMALL",{});var c=A(o);t=N(c,l),_=N(c,"/24 chacacter"),v=N(c,b),w=N(c,"!"),c.forEach(y),a.forEach(y),this.h()},h(){k(e,"class","warning svelte-1722kaa")},m(i,a){q(i,e,a),te(s,e,null),g(e,n),g(e,o),g(o,t),g(o,_),g(o,v),g(o,w),d=!0},p(i,a){(!d||a&1)&&l!==(l=i[4]+"")&&D(t,l),(!d||a&1)&&b!==(b=i[4]!==1?"s":"")&&D(v,b)},i(i){d||(E(s.$$.fragment,i),d=!0)},o(i){T(s.$$.fragment,i),d=!1},d(i){i&&y(e),se(s)}}}function K(m){let e,s,n,o,l,t,_=m[3].title+"",b,v,w,d,i,a=m[4]<24&&J(m);return{c(){e=$("a"),a&&a.c(),s=P(),n=$("img"),l=P(),t=$("span"),b=B(_),v=P(),this.h()},l(c){e=C(c,"A",{href:!0,class:!0});var h=A(e);a&&a.l(h),s=x(h),n=C(h,"IMG",{src:!0,alt:!0}),l=x(h),t=C(h,"SPAN",{class:!0});var r=A(t);b=N(r,_),r.forEach(y),v=x(h),h.forEach(y),this.h()},h(){O(n.src,o=m[3].img_blob??"/logo.png")||k(n,"src",o),k(n,"alt","Playset icon"),k(t,"class","svelte-1722kaa"),k(e,"href",w="/editor/"+m[3].id),k(e,"class","svelte-1722kaa")},m(c,h){q(c,e,h),a&&a.m(e,null),g(e,s),g(e,n),g(e,l),g(e,t),g(t,b),g(e,v),i=!0},p(c,h){c[4]<24?a?(a.p(c,h),h&1&&E(a,1)):(a=J(c),a.c(),E(a,1),a.m(e,s)):a&&(le(),T(a,1,1,()=>{a=null}),ae()),(!i||h&1&&!O(n.src,o=c[3].img_blob??"/logo.png"))&&k(n,"src",o),(!i||h&1)&&_!==(_=c[3].title+"")&&D(b,_),(!i||h&1&&w!==(w="/editor/"+c[3].id))&&k(e,"href",w)},i(c){i||(E(a),c&&ce(()=>{i&&(d||(d=z(e,V,{duration:1e3,y:50,easing:U},!0)),d.run(1))}),i=!0)},o(c){T(a),c&&(d||(d=z(e,V,{duration:1e3,y:50,easing:U},!1)),d.run(0)),i=!1},d(c){c&&y(e),a&&a.d(),c&&d&&d.end()}}}function Ee(m){let e,s,n="Select a Playset",o,l,t,_,b,v,w="New Playset",d,i,a,c;_=new Ce({});let h=F(m[0]??[]),r=[];for(let u=0;u<h.length;u+=1)r[u]=K(Z(m,h,u));const ne=u=>T(r[u],1,1,()=>{r[u]=null});return{c(){e=$("article"),s=$("header"),s.textContent=n,o=P(),l=$("section"),t=$("button"),Y(_.$$.fragment),b=P(),v=$("span"),v.textContent=w,d=P();for(let u=0;u<r.length;u+=1)r[u].c();this.h()},l(u){e=C(u,"ARTICLE",{class:!0});var p=A(e);s=C(p,"HEADER",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-1u1cjxd"&&(s.textContent=n),o=x(p),l=C(p,"SECTION",{class:!0});var f=A(l);t=C(f,"BUTTON",{class:!0});var S=A(t);ee(_.$$.fragment,S),b=x(S),v=C(S,"SPAN",{class:!0,"data-svelte-h":!0}),R(v)!=="svelte-83o1aq"&&(v.textContent=w),S.forEach(y),d=x(f);for(let H=0;H<r.length;H+=1)r[H].l(f);f.forEach(y),p.forEach(y),this.h()},h(){k(s,"class","svelte-1722kaa"),k(v,"class","svelte-1722kaa"),k(t,"class","svelte-1722kaa"),k(l,"class","svelte-1722kaa"),k(e,"class","svelte-1722kaa")},m(u,p){q(u,e,p),g(e,s),g(e,o),g(e,l),g(l,t),te(_,t,null),g(t,b),g(t,v),g(l,d);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,null);i=!0,a||(c=me(t,"click",m[2]),a=!0)},p(u,[p]){if(p&1){h=F(u[0]??[]);let f;for(f=0;f<h.length;f+=1){const S=Z(u,h,f);r[f]?(r[f].p(S,p),E(r[f],1)):(r[f]=K(S),r[f].c(),E(r[f],1),r[f].m(l,null))}for(le(),f=h.length;f<r.length;f+=1)ne(f);ae()}},i(u){if(!i){E(_.$$.fragment,u);for(let p=0;p<h.length;p+=1)E(r[p]);i=!0}},o(u){T(_.$$.fragment,u),r=r.filter(Boolean);for(let p=0;p<r.length;p+=1)T(r[p]);i=!1},d(u){u&&y(e),se(_),de(r,u),a=!1,c()}}}function Ae(m,e,s){let n,o=be(async()=>await G.playsets.toArray());re(m,o,t=>s(0,n=t)),oe(()=>{pe("Playset Editor")}),ie(()=>{ve()});async function l(){const t=await G.playsets.add({});ke(`/editor/${t}`)}return[n,o,l]}class He extends W{constructor(e){super(),X(this,e,Ae,Ee,Q,{})}}export{He as component};
